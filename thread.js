!function(e){function n(r){if(t[r])return t[r].exports;var a=t[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n){function t(e){if(0>=e)return 0;for(var n in e)d.push(0);return d.length}function r(){g=c[m++],u++,g==M.IMM?f=c[m++]:g==M.LC?f=String(d[f]):g==M.LI?f=parseInt(d[f]):g==M.LD?f=parseFloat(d[f]):g==M.SC?d[d[L++]]=String(f):g==M.SI?d[d[L++]]=parseInt(f):g==M.SD?d[d[L++]]=parseFloat(f):g==M.POPC?f=String(d[L++]):g==M.POPI?f=parseInt(d[L++]):g==M.POPD?f=parseFloat(d[L++]):g==M.PUSH?d[--L]=f:g==M.JMP?m=c[m]:g==M.JNZ?m=f?c[m]:m+1:g==M.JZ?m=f?m+1:c[m]:g==M.CALL?(d[--L]=m+1,m=c[m]):g==M.ENT?(d[--L]=l,l=L,L-=c[m++]):g==M.LEV?(L=l,l=d[L++],m=d[L++]):g==M.ADJ?L+=c[m++]:g==M.LEA?f=l+c[m++]:g==M.OR?f=d[L++]|f:g==M.AND?f=d[L++]&f:g==M.XOR?f=d[L++]^f:g==M.EQ?f=d[L++]===f?1:0:g==M.NE?f=d[L++]!==f?1:0:g==M.GT?f=d[L++]>f?1:0:g==M.GE?f=d[L++]>=f?1:0:g==M.LT?f=d[L++]<f?1:0:g==M.LE?f=d[L++]<=f?1:0:g==M.SHL?f=d[L++]<<f:g==M.SHR?f=d[L++]>>f:g==M.ADD?f=d[L++]+f:g==M.SUB?f=d[L++]-f:g==M.MUL?f=d[L++]*f:g==M.DIV?f=d[L++]/f:g==M.MOD?f=d[L++]%f:g==M.PRIT?f=a(d[L]):g==M.MALC?f=t(d[L]):g==M.EXIT&&s()}function a(e){postMessage({cmd:"print",data:e})}function s(){a("exit("+f+")\n"),p=0,close()}function o(e){p=0,a("aborted!"),e&&postMessage({cmd:"core_dump",data:{code:c,memory:d,ip:m,sp:L,bp:l,cycle:u}})}function i(e){c=e.code;for(var n in e.data)d[n]=e.data[n];for(l=L=d.length,m=e.start_addr,u=0,p=1;p;)r()}var c,d,p,u,f,m,g,L,l,t,r,M;onmessage=function(e){var n=e.data;switch(n.cmd){case"init":M=n.CMD,d=new Array(n.ds_size+n.ss_size);break;case"run":if(p)return void postMessage("the machine is running now!");i(n.asm);break;case"terminate":if(!p)return void postMessage("the machine is not running!");o(n.core_dump)}}}]);